一款基于Vue2.0微信的单页应用




         页面前端                           wechat服务端                           微信授权服务
             |                                  |                                     |
             |-------1-请求数据---------—————--> |                                     |
             |                                  |                                     |
             |                                  |                                     |
             |       前端补充回调地址              |                                    |
             |       返203码和微信授权地址    | |  |   |                                 |
             |                           |             |                              |
             |<——--- 3----否-----———————-- |  数据认证  |                              |
             |                             |        |                                 |
             |                               |  |   |                                 |
             |                                  |                            |————————————————————|
             |                                  |                            |        微信认证     |
             |———————4——————————————————————————————经—微信授权页并获取微信code——>|————————————————————|
             |                                  |                                     |
             |                                  |                                     |
             |                                  |                                     |
             |                                  |                                     |
             |                                  |                           |----------------------|
             |                                  |                           |      用户信息据数      |
             |           传微信code        |————————————————————|            |                      |
             |           和微信企业号       |  用户数据           | ————6—————>|______________________|
             |-------5---请求服务端授权---> |  生成jwt置于cookie  |
             |                            |————————————————————|                      |
             |                                  |                                     |
             |                                  |                                     |
             |                                  |                                     |
             |<------7---返页面前端200状态码————-—|                                     |
             |                                  |                                     |
             |                                  |                                     |
             |————————————|                     |                                     |
             |  页面前端   |                     |                                     |
             | 重新请求数据 | 8---------- ----->  |                                     |
             |——————------|                     |                                     |
             |                                  是                                    |
             |       返回json数据                |                                     |
             |<----- 2-----——------------—————--|
             |                                  |
